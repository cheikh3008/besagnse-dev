{% extends "base.html.twig" %}
    {% block header %}
        {% include "partials/banniere/banniere.html.twig" %}
    {% endblock header %}
    {% block body %}
    <div style="background-color: #f0f2f5;">

        <div class="container pt-4">
        {% for pin in pins %}
            <div class=" col-md-6 mx-auto mb-1   ">
                <div class="card card_pin_show  " >
                    <div class="card-body ">
                        <div>
                            <div class="dropdown">
                                <button class="float-right" style="border: none; background-color:#ffffff;" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <i class="fas fa-ellipsis-h float-right mt-2" ></i>
                                </button>
                                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
                                    <a class="dropdown-item" href="{{ path('pin_edit', {'id': pin.id}) }}">Modifier</a>
                                    <div class="ml-2">{{ include('pin/_delete_form.html.twig') }}</div>
                                </div>
                            </div>
                            <h4 class="card-title ">{{pin.titre}}</h4>
                            <p class="card-text">{{pin.description}}</p>
                            <p class="card-text">
                                <small class="text-muted">
                                    Publié le {{pin.updatedAt| date('d/m/Y')}} à {{pin.updatedAt| date('H:i')}}
                                </small>
                            </p>
                            <a href="{{ path('pin_show', {'id': pin.id}) }}">
                                <img src="{{vich_uploader_asset(pin) | imagine_filter('squared_thumbnail_medium')}}" class="card-img img-fluid rounded"  alt="{{pin.titre}}">
                            </a>
                        </div>
                        <hr class="mb-1">
                    </div>
                    <div class="pb-3  mx-4 d-flex justify-content-between">
                        <a href=" {{path('pin_like', {'id': pin.id})}} " class="btn btn-link js-like ">
                            {% if app.user and pin.isLikedByUser(app.user) %}
                                <i class="fas fa-thumbs-up"></i>
                            {% else %}
                                <i class="far fa-thumbs-up"></i>
                            {% endif %}
                            <span class="js-likes"> {{pin.jaimes | length > 0}} </span>
                            <span class="js-label">J'aime</span>
                        </a>
                        <span  class="btn btn-link js-comment ">
                            <i class="far fa-comment"><span class="pl-2">{{pin.commentaire | length > 0}} Commenter</span></i>
                        </span>
                        
                    </div>
                    
                    <div class="mx-4 ">
                        <form  method="POST" action="{{path('pin_comment', {'id': pin.id})}}" id="form-comment" >
                            <div id="commentaire">
                                <div class="form-group"><label for="message" >Message</label><textarea id="message"
                                    name="message"  class="form-control"  ></textarea>
                                </div>
                            </div>
                            <button class="btn btn-primary mb-3" type="submit" class="js-comment">Commenter</button>
                        
                        </form>
                            
                        {% for commentaire in pin.commentaire %}
                            
                            <div class="alert alert-secondary mt-2" role="alert">
                                <small class="font-weight-bold">{{commentaire.user.fullname}}</small><br> 
                                <blockquote class="blockquote  text-small" style="font-size: 0.9em;">
                                    {{commentaire.message}}
                                </blockquote>
                            </div>
                        {% endfor %}

                    </div>
                </div>
                
            </div>
           
        {% else %}
       
            <p>no records found</p>
            
        {% endfor %} 
    
        </div>
    </div>
{% endblock body %}
